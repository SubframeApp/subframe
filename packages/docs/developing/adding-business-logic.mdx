---
title: Adding business logic
description: Integrate state management, API calls, and event handlers.
---

Subframe exports clean UI code without business logic. State management, API calls, and event handlers belong in your codebase, not a design tool.

This guide shows how to add interactivity to exported Subframe designs.

<Tip>
We've made a [CodeSandbox](https://codesandbox.io/p/devbox/subframe-spoofy-rw5wrj) project for the examples below so you can play around with the code.
</Tip>

## Example 1: Magic link login form

Let's build a simple magic link login form. This is what we want the end result to look like:

<img src="/images/adding-business-logic/form-example-1.png" alt="A login form with a text input labeled 'Email' and a button labeled 'Send Magic Link' with a send icon, styled with a clean modern design" className="w-full" />

After [copying the page code](/developing/exporting-code) from Subframe, add basic functionality:

1. Add a fake fetch function that simulates a network request and a `handleSubmit` function for form submission.
2. Add a `submitting` state variable and pass it to the Button in the `disabled` and `loading` props to show loading state.

The highlighted lines show the changes:

<CodeGroup>

```tsx src/App.tsx (without business logic) [expandable]
import { DialogLayout } from "@/ui/layouts/DialogLayout"
import { TextField } from "@/ui/components/TextField"
import { Button } from "@/ui/components/Button"

function App() {
  return (
    <DialogLayout open={true}>
      <div className="flex h-full w-full flex-col items-center gap-6 bg-default-background px-6 py-12">
        <span className="text-heading-2 font-heading-2 text-default-font">Magic Link Login</span>
        <form className="flex w-full flex-col items-start gap-2">
          <TextField className="h-auto w-full flex-none" label="Email">
            <TextField.Input required name="name" />
          </TextField>
          <Button
            type="submit"
            className="h-8 w-full flex-none"
            variant="brand-secondary"
            icon="FeatherSend"
            iconRight={null}
            disabled={false}
            loading={false}
          >
            Send Magic Link
          </Button>
        </form>
      </div>
    </DialogLayout>
  )
}

export default App
```

```tsx src/App.tsx (with business logic) {4, 6-15, 18, 20-32, 49-50} [expandable]
import { DialogLayout } from "@/ui/layouts/DialogLayout"
import { TextField } from "@/ui/components/TextField"
import { Button } from "@/ui/components/Button"
import { useState, type FormEvent } from "react"

const fakeFetch = (email: string | undefined) => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (!email) {
        reject(new Response("Email is required", { status: 400 }))
      }
      resolve(new Response("Success!", { status: 200 }))
    }, 1000)
  })
}

function App() {
  const [submitting, setSubmitting] = useState(false)

  async function handleSubmit(e: FormEvent<HTMLFormElement>) {
    e.preventDefault()
    setSubmitting(true)
    const formData = new FormData(e.currentTarget)
    const email = formData.get("email")?.toString()
    try {
      await fakeFetch(email)
    } catch (e) {
      console.error(e)
    } finally {
      setSubmitting(false)
    }
  }

  return (
    <DialogLayout open={true}>
      <div className="flex h-full w-full flex-col items-center gap-6 bg-default-background px-6 py-12">
        <span className="text-heading-2 font-heading-2 text-default-font">Magic Link Login</span>
        <form onSubmit={handleSubmit} className="flex w-full flex-col items-start gap-2">
          <TextField className="h-auto w-full flex-none" label="Email" icon={null} iconRight={null}>
            <TextField.Input required name="name" />
          </TextField>
          <Button
            type="submit"
            className="h-8 w-full flex-none"
            variant="brand-secondary"
            size="medium"
            icon="FeatherSend"
            iconRight={null}
            disabled={submitting}
            loading={submitting}
          >
            Send Magic Link
          </Button>
        </form>
      </div>
    </DialogLayout>
  )
}

export default App
```

</CodeGroup>

The login form now has interactive states and loading feedback.

<video
  autoPlay
  muted
  loop
  playsInline
  className="w-full"
  src="https://hevpkratkeuc60w7.public.blob.vercel-storage.com/form-example-2-IzeEyBCMx6a6qIDJr9D0OzvXYOd5Qu.webm"
/>

## Example 2: Interactive track cards

This example shows a feature that displays most-listened-to tracks from the past week with favoriting functionality.

When adding business logic to Subframe components, [wrap the component](/developing/disabling-sync#try-wrapper-components-first) instead of editing generated code in `src/ui/` directly.

Start with a `TrackCard` component and `FavoriteTracks` page designed in Subframe:

<img src="/images/adding-business-logic/component-example-page.png" alt="A page showing three music track cards in a row, each displaying an album cover, track title, artist name, track length, genre tag, and a heart-shaped favorite button" className="w-full" />

Add favoriting functionality:

1. Wrap the original `TrackCard` component with a new component that manages the business logic.
2. Use this wrapper component in the `FavoriteTracks` page to manage data, favorite state, and onClick handlers.

<CodeGroup>

```tsx src/components/TrackCard.tsx [expandable]
import { HTMLAttributes, useMemo } from "react"
import { TrackCard as SubframeTrackCard } from "@/ui"
import { Image } from "./Image"

export interface TrackCardProps extends HTMLAttributes<HTMLDivElement> {
  title: string
  artist: string
  length: number // in seconds
  genre: string
  coverImage: string
  isFavorite: boolean
  onFavoriteClick: () => void
}

function lengthToString(length: number): string {
  const minutes = Math.floor(length / 60)
  const seconds = length % 60
  return `${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`
}

const TrackCard = ({ title, artist, length, genre, coverImage, isFavorite, onFavoriteClick }: TrackCardProps) => {
  // Convert track length in seconds to MM:SS format
  const formattedLength = useMemo(() => lengthToString(length), [length])
  // Determine the icon based on favorite status
  const icon = useMemo(() => (isFavorite ? "FeatherHeartOff" : "FeatherHeart"), [isFavorite])

  return (
    <SubframeTrackCard
      title={title}
      artist={artist}
      length={formattedLength}
      favoriteButtonSlot={<SubframeTrackCard.FavoriteButton icon={icon} onClick={onFavoriteClick} />}
      imageSlot={<Image src={coverImage} width={500} height={500} />}
      genre={genre}
    />
  )
}

export default TrackCard
```

```tsx src/components/FavoriteTracks.tsx [expandable]
import { useState } from "react"
import TrackCardWithLogic from "../components/TrackCard"

interface Track {
  id: number
  title: string
  artist: string
  length: number // in seconds
  genre: string
  coverImage: string
  isFavorite: boolean
}

const FavoriteTracks = () => {
  const [tracks, setTracks] = useState<Track[]>([
    {
      id: 1,
      title: "The Less I Know The Better",
      artist: "Tame Impala",
      length: 218,
      genre: "Disco",
      coverImage: "/covers/tame_impala-currents.jpg",
      isFavorite: false,
    },
    {
      id: 2,
      title: "Shadowplay",
      artist: "Joy Division",
      length: 233,
      genre: "Post Punk",
      coverImage: "/covers/joy_division-unknown-pleasures.jpg",
      isFavorite: false,
    },
    {
      id: 3,
      title: "Bohemian Rhapsody",
      artist: "Queen",
      length: 355,
      genre: "Progressive Rock",
      coverImage: "/covers/queen-bohemian_rhapsody.jpg",
      isFavorite: false,
    },
  ])

  const handleFavoriteClick = (id: number) => {
    setTracks((prevTracks) =>
      prevTracks.map((track) => (track.id === id ? { ...track, isFavorite: !track.isFavorite } : track)),
    )
  }

  return (
    <div className="flex flex-col gap-4">
      <span className="text-heading-1 font-heading-1 text-default-font">Your favorite tracks of the week</span>
      <div className="flex flex-row gap-4">
        {tracks.map((track) => (
          <TrackCardWithLogic
            key={track.id}
            title={track.title}
            artist={track.artist}
            length={track.length}
            genre={track.genre}
            coverImage={track.coverImage}
            isFavorite={track.isFavorite}
            onFavoriteClick={() => handleFavoriteClick(track.id)}
          />
        ))}
      </div>
    </div>
  )
}

export default FavoriteTracks
```

</CodeGroup>

The final result:

<video
  autoPlay
  muted
  loop
  playsInline
  className="w-full aspect-video"
  src="https://hevpkratkeuc60w7.public.blob.vercel-storage.com/component-example-2-ZRPtwOWlu7m9aaOgLi7ASo4FwRNaIj.webm"
/>

This example uses slots for the image and favorite button. See [Props and slots](/components/props-and-slots) for more details.
